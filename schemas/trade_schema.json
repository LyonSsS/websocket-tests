{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Kraken Trade Channel Message Schema (v2)",
  "description": "Schema for trade channel messages from Kraken WebSocket API v2",
  "type": "object",
  "required": ["channel", "type", "data"],
  "properties": {
    "channel": {
      "type": "string",
      "const": "trade",
      "description": "Channel name"
    },
    "type": {
      "type": "string",
      "enum": ["snapshot", "update"],
      "description": "Message type"
    },
    "data": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["symbol", "side", "qty", "price", "ord_type", "trade_id", "timestamp"],
        "properties": {
          "symbol": {
            "type": "string",
            "description": "Currency pair identifier"
          },
          "side": {
            "type": "string",
            "enum": ["buy", "sell"],
            "description": "Taker order direction"
          },
          "qty": {
            "type": "number",
            "description": "Trade size"
          },
          "price": {
            "type": "number",
            "description": "Average trade price"
          },
          "ord_type": {
            "type": "string",
            "enum": ["limit", "market"],
            "description": "Order type"
          },
          "trade_id": {
            "type": "integer",
            "description": "Unique sequence number per book"
          },
          "timestamp": {
            "type": "string",
            "description": "RFC3339 timestamp of trade execution"
          }
        }
      }
    }
  }
}
