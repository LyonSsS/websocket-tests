{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Kraken Ticker Channel Message Schema (v2)",
  "description": "Schema for ticker channel data messages from Kraken WebSocket API v2",
  "type": "object",
  "required": ["channel", "type", "data"],
  "properties": {
    "channel": {
      "type": "string",
      "const": "ticker",
      "description": "Channel name"
    },
    "type": {
      "type": "string",
      "enum": ["snapshot", "update"],
      "description": "Message type"
    },
    "data": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["symbol", "bid", "bid_qty", "ask", "ask_qty", "last", "volume", "vwap", "low", "high"],
        "properties": {
          "symbol": {
            "type": "string",
            "description": "Currency pair (e.g., BTC/USD)"
          },
          "bid": {
            "type": "number",
            "description": "Best bid price"
          },
          "bid_qty": {
            "type": "number",
            "description": "Best bid quantity"
          },
          "ask": {
            "type": "number",
            "description": "Best ask price"
          },
          "ask_qty": {
            "type": "number",
            "description": "Best ask quantity"
          },
          "last": {
            "type": "number",
            "description": "Last traded price"
          },
          "volume": {
            "type": "number",
            "description": "24-hour volume in base currency"
          },
          "vwap": {
            "type": "number",
            "description": "24-hour volume-weighted average price"
          },
          "low": {
            "type": "number",
            "description": "24-hour lowest trade price"
          },
          "high": {
            "type": "number",
            "description": "24-hour highest trade price"
          },
          "change": {
            "type": "number",
            "description": "24-hour price change in quote currency"
          },
          "change_pct": {
            "type": "number",
            "description": "24-hour percentage change"
          }
        }
      }
    }
  }
}
